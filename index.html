<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table</title>
</head>

<body>
    <style>
        html{
            background: darkslategray;
        }
        h1{
            color: white;
        }
        *{
            text-align: center;
            font-family: Georgia, serif;
         }
        input{
            font-size: 40pt;
            border-radius: 5px;
        }
        #btn{
            background: blue;
            color: white;
        }
    </style>
    <div id="game">
        <h1>Table - The Periodic Guessing Game!</h1>
            <input type="text" placeholder="Element Name" id="g1" min="1">
        </div>
        <br>
        <input type="button" value="Check" id="btn">
        <br>
        <img height="700" src="https://chemistrytalk.org/wp-content/uploads/2022/04/Periodic-Tablewlogo-scaled.jpg">
        <script>
            var parts;
            var semimetals = ['Boron', 'Silicon', 'Germanium', 'Arsenic', 'Antimony', 'Tellurium', 'Polonium']
            var nonmetals = ["Hydrogen", "Helium", "Boron", "Carbon", "Nitrogen", "Oxygen", "Fluorine", "Neon", "Silicon", "Phosphorous", "Sulfur", "Chlorine", "Argon", "Germanium", "Arsenic", "Selenium", "Bromine", "Krypton", "Antimony", "Tellurium", "Iodine", "Xenon", "Radon"]
            var metals;
            var checkbtn = document.querySelector("#btn");
                    var current = document.querySelector("#g1");
                    current.value = "";
            fetch("metals.txt").then((res) => res.text()).then((text) => {
                metals = text.split("\n");
            })
            var guesses = 0;
            var answer;
            fetch("elements.txt")
                .then((res) => res.text())
                .then((text) => {
                    parts = text.split("\n");
                    answer = parts[Math.floor(Math.random() * parts.length)];
                    
                    checkbtn.onclick = () => {
                        guesses++;
                        current.readOnly = true;
                        if (answer.split(",")[0].toLowerCase() === current.value.toLowerCase()) {
                            alert("You won!");
                        }
                        else {
                            var help = parseInt(answer.split(",")[2]);

                            if (guesses === 1) alert("The atomic number is in between " + (help - 10) + " and " + (help + 10) + ".")
                            if (guesses === 2) {
                                if (metals.includes(answer.split(",")[0])) help = "metals";
                                else if (nonmetals.includes(answer.split(",")[0])) help = "nonmetals";
                                else help = "semimetals";
                                alert("The element is in the group " + help + ".")
                            }
                            if(guesses === 3){
                                alert("The element is abbreviated to "  +answer.split(",")[1].length + " letters and starts with the letter " + answer.split(",")[0].slice(0,1) + ".")
                            }
                            if (guesses < 4) {
                                current = current.cloneNode();
                                current.readOnly = false;
                                var br = document.createElement("br");
                                document.getElementById("game").appendChild(br);
                                document.getElementById("game").appendChild(current);
                                current.value = "";
                            }
                            else{
                                alert("The answer was " + answer.split(",")[0]);

                            }
                        }

                    }
                })
                .catch((e) => console.error(e));

        </script>
</body>

</html>